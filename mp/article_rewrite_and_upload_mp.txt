{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7525459268281565238","flowMode":0,"spaceId":"7461798853910724634","isDouyin":false,"host":"www.coze.cn"},"json":{"nodes":[{"id":"118285","type":"4","meta":{"position":{"x":-1052.5794698287614,"y":128.8563343693141}},"data":{"nodeMeta":{"description":"爬取网页链接中的图片，如一篇文章，获取文章中的所有配图\n\n参数说明：\nurl ：你要爬取网页图片的链接\nkey ： IP1GT8qOPek5p3bKipPhv1WeWvzsME07tjuOl9xluS\n这个 key 每月每日有固定的使用量，望理解，如有需求，可定制。\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"获取网页图片:getUrlImg","title":"getUrlImg"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7488188741249466409","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"getUrlImg","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7486808743238254642","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"获取网页图片","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"key","input":{"type":"string","value":{"type":"literal","content":"hcto2ydMmeCsKKY2dhwpF1CxtZBi8xShaPgwgGpLnz","rawMeta":{"type":1}}}},{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"articleUrl"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"object","name":"data","schema":[{"type":"string","name":"status","required":false,"description":"状态，done ：完成"},{"type":"string","name":"url","required":false,"description":"请求的链接"},{"type":"string","name":"created_at","required":false,"description":"时间"},{"type":"string","name":"id","required":false,"description":"id"},{"type":"list","name":"images","schema":{"type":"object","schema":[{"type":"string","name":"id","required":false,"description":"图片 id"},{"type":"string","name":"url","required":false,"description":"图片链接"}]},"required":false,"description":"图片集"},{"type":"string","name":"project_id","required":false,"description":"项目 ID"}],"required":false,"description":"返回数据"}]},"_temp":{"bounds":{"x":-1232.5794698287614,"y":128.8563343693141,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/2320392757457867_1745562536776628972_3hd8ymsYm2.png?lk3s=cd508e2b&x-expires=1754925522&x-signature=maeJlq684jNgbHj9%2BeG4%2Fw1OhAA%3D","apiName":"getUrlImg","pluginID":"7486808743238254642","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7433367703371989027","inputs":[{"description":"试用key：IP1GT8qOPek5p3bKipPhv1WeWvzsME07tjuOl9xluS ，每天有限额","input":{},"name":"key","required":true,"type":"string"},{"description":"网站链接","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"返回数据","input":{},"name":"data","required":false,"schema":[{"description":"请求的链接","input":{},"name":"url","required":false,"type":"string"},{"description":"时间","input":{},"name":"created_at","required":false,"type":"string"},{"description":"id","input":{},"name":"id","required":false,"type":"string"},{"description":"图片集","input":{},"name":"images","required":false,"schema":{"schema":[{"description":"图片 id","input":{},"name":"id","required":false,"type":"string"},{"description":"图片链接","input":{},"name":"url","required":false,"type":"string"}],"type":"object"},"type":"list"},{"description":"项目 ID","input":{},"name":"project_id","required":false,"type":"string"},{"description":"状态，done ：完成","input":{},"name":"status","required":false,"type":"string"}],"type":"object"}],"updateTime":1752287454,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"爬取网页链接中的图片，如一篇文章，获取文章中的所有配图\n\n参数说明：\nurl ：你要爬取网页图片的链接\nkey ： IP1GT8qOPek5p3bKipPhv1WeWvzsME07tjuOl9xluS\n这个 key 每月每日有固定的使用量，望理解，如有需求，可定制。\n","title":"getUrlImg","mainColor":"#CA61FF"}}},{"id":"154444","type":"4","meta":{"position":{"x":747.7714624853544,"y":-626.5405486022111}},"data":{"nodeMeta":{"description":"将Markdown格式的文本转换为HTML格式的文本。输入Markdown文本，输出对应的HTML文本。转换效果见：[https://yanxi123.com/md2wechat/](https://yanxi123.com/md2wechat/)","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"markdown 转微信公众号 html:md2html","title":"md2html"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7416039303630880795","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"md2html","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7416039303630864411","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"markdown 转微信公众号 html","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"要转换的Markdown文本。","input":{},"name":"markdown","required":true,"type":"string"},{"defaultValue":"default","description":"配色主题，可选值：default, chengxin, mohei, chazi, nenqing, lvyi, hongfei, wechat-format, lanying, kejilan, lanqing, shanchui, qianduan, jikehei, jian, qiangweizi, menglv, quanzhanlan","input":{},"name":"theme","required":true,"type":"string"},{"defaultValue":"no-cx","description":"可选值：no-cx（无衬线）, cx（衬线）, default value is no-cx","input":{},"name":"font","required":true,"type":"string"}],"inputParameters":[{"name":"font","input":{"type":"string","value":{"type":"literal","content":"no-cx","rawMeta":{"type":1}}}},{"name":"markdown","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"150766","name":"output"},"rawMeta":{"type":1}}}},{"name":"theme","input":{"type":"string","value":{"type":"literal","content":"lanqing","rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"error","required":false,"description":"转换过程中的错误信息"},{"type":"boolean","name":"success","required":false,"description":"转换成功返回true，失败返回false"},{"type":"string","name":"data","required":false,"description":"Markdown格式的文本数据。"}]},"_temp":{"bounds":{"x":567.7714624853544,"y":-626.5405486022111,"width":360,"height":112},"externalData":{"icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/4264359712792281_1727544047746975922_Xd4HQUVgDO.png?lk3s=cd508e2b&x-expires=1754925522&x-signature=15ueO9pbYF%2B1CS5yjH%2FU5Ww1UpY%3D","apiName":"md2html","pluginID":"7416039303630864411","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7393184529902993446","inputs":[{"defaultValue":"no-cx","description":"可选值：no-cx（无衬线）, cx（衬线）, default value is no-cx","input":{},"name":"font","required":true,"type":"string"},{"description":"要转换的Markdown文本。","input":{},"name":"markdown","required":true,"type":"string"},{"defaultValue":"default","description":"配色主题，可选值：default, chengxin, mohei, chazi, nenqing, lvyi, hongfei, wechat-format, lanying, kejilan, lanqing, shanchui, qianduan, jikehei, jian, qiangweizi, menglv, quanzhanlan","input":{},"name":"theme","required":true,"type":"string"}],"outputs":[{"description":"转换成功返回true，失败返回false","input":{},"name":"success","required":false,"type":"boolean"},{"description":"Markdown格式的文本数据。","input":{},"name":"data","required":false,"type":"string"},{"description":"转换过程中的错误信息","input":{},"name":"error","required":false,"type":"string"}],"updateTime":1752045322,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"将Markdown格式的文本转换为HTML格式的文本。输入Markdown文本，输出对应的HTML文本。转换效果见：[https://yanxi123.com/md2wechat/](https://yanxi123.com/md2wechat/)","title":"md2html","mainColor":"#CA61FF"}}},{"id":"150766","type":"3","meta":{"position":{"x":103.83208934243439,"y":-652.5405486022111}},"data":{"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"图片插入文章"},"inputs":{"inputParameters":[{"name":"images","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"167811","name":"output"},"rawMeta":{"type":99}}}},{"name":"words","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"189653","name":"content"},"rawMeta":{"type":1}}}}],"llmParam":[{"name":"temperature","input":{"type":"float","value":{"type":"literal","content":"0.8","rawMeta":{"type":4}}}},{"name":"maxTokens","input":{"type":"integer","value":{"type":"literal","content":"4096","rawMeta":{"type":2}}}},{"name":"responseFormat","input":{"type":"integer","value":{"type":"literal","content":"1","rawMeta":{"type":2}}}},{"name":"modleName","input":{"type":"string","value":{"type":"literal","content":"豆包·1.5·Pro·256k","rawMeta":{"type":1}}}},{"name":"modelType","input":{"type":"integer","value":{"type":"literal","content":"1739350359","rawMeta":{"type":2}}}},{"name":"generationDiversity","input":{"type":"string","value":{"type":"literal","content":"balance","rawMeta":{"type":1}}}},{"name":"prompt","input":{"type":"string","value":{"type":"literal","content":"图片链接：{{images}}\n\nmarkdown 格式的文章：{{words}}","rawMeta":{"type":1}}}},{"name":"enableChatHistory","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"chatHistoryRound","input":{"type":"integer","value":{"type":"literal","content":"3","rawMeta":{"type":2}}}},{"name":"systemPrompt","input":{"type":"string","value":{"type":"literal","content":"# 角色\n你是一个专业且高效的内容处理助手，专为满足用户在公众号AI爆文创作方面的内容需求而服务，擅长按照特定要求将给定的图片链接精准插入到markdown格式的文章中。\n\n## 技能\n### 技能 1: 插入图片链接\n1. 当用户提供markdown格式的文章和图片链接时，**必须严格按照markdown图片格式**将所有图片链接转换为：`![图片描述](图片链接)`（注意：必须以感叹号!开头）。然后，在充分考虑文章逻辑和连贯性的基础上，把这些图片链接随机插入到正文合适位置，保证一个位置仅插入一张图片，且所有图片都要插入到文章中。若图片数量较多，可每隔一两句话插入一张图片。\n\n2. **图片格式要求**：\n   - 必须使用正确的markdown图片语法：`![alt文本](图片URL)`\n   - 感叹号`!`是必需的，不能省略\n   - 方括号内填写图片描述（如：图片1、图片2等）\n   - 圆括号内填写完整的图片链接\n\n3. 文末最多只能插入一张图片，若还有多余图片链接，则不再插入。\n\n4. 在插入图片链接的整个过程中，仔细检查并优化文章格式，确保插入后的文章完全符合markdown规范，语句通顺、逻辑清晰，不给读者正常阅读造成任何困扰。\n\n5. 最终输出内容仅为插入链接后的完整markdown文章内容。\n\n## 限制:\n- 仅处理与将图片链接插入到markdown格式文章相关的任务，对于任何无关话题坚决拒绝回答。\n- 输出的内容必须是严格正确的markdown格式，不允许出现任何格式错误。\n- **特别注意**：图片链接必须使用`![描述](链接)`格式，绝不能使用`[描述](链接)`格式。\n- 插入图片链接的位置要经过深思熟虑，绝对不能破坏文章原有的逻辑和结构。\n\n## 格式检查清单\n在输出前，请确认：\n- [ ] 所有图片链接都以`!`开头\n- [ ] 图片描述在方括号`[]`内\n- [ ] 图片链接在圆括号`()`内\n- [ ] 没有遗漏任何图片链接\n- [ ] 图片插入位置合理，不影响文章流畅性","rawMeta":{"type":1}}}},{"name":"stableSystemPrompt","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"canContinue","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}}],"settingOnError":{"switch":false,"processType":1,"timeoutMs":600000,"retryTimes":0}},"outputs":[{"type":"string","name":"output","required":false}],"version":"3"},"_temp":{"bounds":{"x":-76.16791065756561,"y":-652.5405486022111,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","description":"调用大语言模型,使用变量和提示词生成回复","title":"大模型","mainColor":"#5C62FF"}}},{"id":"138801","type":"21","meta":{"position":{"x":-959.970813537725,"y":-790.5405486022111},"canvasPosition":{"x":-2280.924467386464,"y":-242.85185710926572}},"data":{"inputs":{"inputParameters":[{"name":"input","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"id","required":false,"description":"图片 id"},{"type":"string","name":"url","required":false,"description":"图片链接"}]},"value":{"type":"ref","content":{"source":"block-output","blockID":"118285","name":"data.images"},"rawMeta":{"type":103}}}}],"loopCount":{"type":"integer","value":{"type":"literal","content":"10"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"获取链接图片"},"outputs":[{"name":"output","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"181874","name":"Group1"},"rawMeta":{"type":1}}}}]},"blocks":[{"id":"181874","type":"32","meta":{"position":{"x":2088.0018389662696,"y":-10.535926497085356}},"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"135960","name":"url"},"rawMeta":{"type":1}}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合"},"outputs":[{"type":"string","name":"Group1"}]},"_temp":{"bounds":{"x":-372.92262842019454,"y":-253.3877836063511,"width":360,"height":114},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","description":"对多个分支的输出进行聚合处理","title":"变量聚合","mainColor":"#00B2B2"}}},{"id":"131170","type":"8","meta":{"position":{"x":401.2295738574645,"y":-0.43837264892112415}},"data":{"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_3"},"inputs":{"branches":[{"condition":{"logic":2,"conditions":[{"operator":7,"left":{"input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"138801","name":"input.url"}}}},"right":{"input":{"type":"string","value":{"type":"literal","content":"mmbiz.qpic.cn","rawMeta":{"type":1}}}}}]}}]}},"_temp":{"bounds":{"x":-2059.6948935289997,"y":-243.29022975818685,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","title":"选择器","mainColor":"#00B2B2"}}},{"id":"135960","type":"4","meta":{"position":{"x":1147.1673180674168,"y":-53.962354913118276}},"data":{"nodeMeta":{"description":"微信公众号上传图文消息内的图片获取URL\n本接口所上传的图片不占用公众号的素材库中图片数量的100000个的限制。图片仅支持jpg/png格式，大小必须在1MB以下。\n可放置图文消息中使用","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"微信公众号上传草稿箱素材库:upload_img","title":"upload_img"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7406542207831883787","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"upload_img","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7406542207831867403","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"微信公众号上传草稿箱素材库","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"access_token","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"164336","name":"token"},"rawMeta":{"type":1}}}},{"name":"pic_url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"138801","name":"input.url"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"errcode","required":false,"description":"错误代码"},{"type":"string","name":"errmsg","required":false,"description":"错误信息"},{"type":"string","name":"url","required":false,"description":"上传图文消息内的图片获取URL"}]},"_temp":{"bounds":{"x":-1313.7571493190474,"y":-296.814212022384,"width":360,"height":112},"externalData":{"icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/3947664607023754_1724469953807265336_eb6V07gW8X.png?lk3s=cd508e2b&x-expires=1754925522&x-signature=vjMTOHwdvtaw1tMyLDSIbvd9sgk%3D","apiName":"upload_img","pluginID":"7406542207831867403","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7396121138776244262","inputs":[{"description":"微信公众号的access_token","input":{},"name":"access_token","required":true,"type":"string"},{"description":"图片Url","input":{},"name":"pic_url","required":true,"type":"string"}],"outputs":[{"description":"上传图文消息内的图片获取URL","input":{},"name":"url","required":false,"type":"string"},{"description":"错误代码","input":{},"name":"errcode","required":false,"type":"integer"},{"description":"错误信息","input":{},"name":"errmsg","required":false,"type":"string"}],"updateTime":1752044880,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"微信公众号上传图文消息内的图片获取URL\n本接口所上传的图片不占用公众号的素材库中图片数量的100000个的限制。图片仅支持jpg/png格式，大小必须在1MB以下。\n可放置图文消息中使用","title":"upload_img","mainColor":"#CA61FF"}}}],"edges":[{"sourceNodeID":"135960","targetNodeID":"181874"},{"sourceNodeID":"181874","targetNodeID":"138801","targetPortID":"loop-function-inline-input"},{"sourceNodeID":"138801","targetNodeID":"131170","sourcePortID":"loop-function-inline-output"},{"sourceNodeID":"131170","targetNodeID":"135960","sourcePortID":"true"},{"sourceNodeID":"131170","targetNodeID":"138801","sourcePortID":"false","targetPortID":"loop-function-inline-input"}],"_temp":{"bounds":{"x":-1139.970813537725,"y":-790.5405486022111,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","description":"用于通过设定循环次数和逻辑，重复执行一系列任务","title":"循环","mainColor":"#00B2B2"}}},{"id":"437595","type":"5","meta":{"position":{"x":747.7714624853544,"y":-421.03251966558605}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"首图"},"inputs":{"inputParameters":[{"name":"input","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"167811","name":"output"},"rawMeta":{"type":99}}}}],"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret =  params.input[0]\n    return ret;\n}","language":5,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"key0","required":false}]},"_temp":{"bounds":{"x":567.7714624853544,"y":-421.03251966558605,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"128908","type":"8","meta":{"position":{"x":-485.03282245339255,"y":128.8563343693141}},"data":{"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_5"},"inputs":{"branches":[{"condition":{"logic":2,"conditions":[{"operator":1,"left":{"input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"118285","name":"data.status"}}}},"right":{"input":{"type":"string","value":{"type":"literal","content":"done","rawMeta":{"type":1}}}}}]}}]}},"_temp":{"bounds":{"x":-665.0328224533926,"y":128.8563343693141,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","title":"选择器","mainColor":"#00B2B2"}}},{"id":"117268","type":"32","meta":{"position":{"x":747.7714624853544,"y":161.9888475828288}},"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"437595","name":"key0"},"rawMeta":{"type":1}}},{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"defaultCoverImg"},"rawMeta":{"type":1}}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合-首图"},"outputs":[{"type":"string","name":"Group1"}]},"_temp":{"bounds":{"x":567.7714624853544,"y":161.9888475828288,"width":360,"height":114},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","description":"对多个分支的输出进行聚合处理","title":"变量聚合","mainColor":"#00B2B2"}}},{"id":"171463","type":"13","meta":{"position":{"x":47.17564712393145,"y":266.85633436931414}},"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"type":"literal","content":"爬取网页的图片失败\n\n故使用固定的首图作为推送文章必须的参数，把文章推送到公众号\n\n-----\n\n爬网页返回结果：{{res}}\n\n"}},"inputParameters":[{"name":"res","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"defaultCoverImg"},"rawMeta":{"type":1}}}}],"streamingOutput":true},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出"}},"_temp":{"bounds":{"x":-132.82435287606856,"y":266.85633436931414,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","title":"输出","mainColor":"#5C62FF"}}},{"id":"164336","type":"9","meta":{"position":{"x":-1592.1010010767316,"y":113.00633436931412}},"data":{"inputs":{"inputDefs":[{"input":{},"name":"account","required":false,"type":"string"}],"inputParameters":[{"name":"account","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"account"},"rawMeta":{"type":1}}}}],"settingOnError":{},"spaceId":"7461798853910724634","type":0,"workflowId":"7525662788488986664","workflowVersion":"v0.0.1"},"nodeMeta":{"description":"判断公众号 token 是否有效，获取有效token","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Workflow-v2.jpg","isImageflow":false,"title":"getWeixinMpToken"},"outputs":[{"type":"string","name":"token","required":false}]},"_temp":{"bounds":{"x":-1772.1010010767316,"y":113.00633436931412,"width":360,"height":112},"externalData":{"description":"判断公众号 token 是否有效，获取有效token","icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/workflow.png?lk3s=81d4c505&x-expires=1752337122&x-signature=TSlMLLO6GyLdmnXEr872nwOhXGQ%3D","isImageflow":false,"title":"getWeixinMpToken","commit_id":"Bot_7525662788488986664_Publish_7525707047939883058","create_time":1752204913,"creator":{"avatar_url":"https://p3-passport.byteacctimg.com/img/user-avatar/ddc780ee1e31a264859478d8e82c46c5~300x300.image","id":"1247296525702096","name":"hresh","self":true},"desc":"判断公众号 token 是否有效，获取有效token","end_type":0,"flow_mode":0,"flow_version":"v0.0.1","flow_version_desc":"","icon_uri":"plugin_icon/workflow.png","is_project":false,"latest_flow_version":"v0.0.1","latest_flow_version_desc":"发版","name":"getWeixinMpToken","output_nodes":[],"plugin_id":"7525707039465685001","space_id":"7461798853910724634","update_time":1752304183,"version":"","workflow_id":"7525662788488986664","inputsDefinition":[{"input":{},"name":"account","required":false,"type":"string"}],"latestVersion":"v0.0.1","mainColor":"#00B83E"}}},{"id":"108433","type":"4","meta":{"position":{"x":-1936.0765047207046,"y":425.8127841523088}},"data":{"nodeMeta":{"description":"当你需要获取网页、pdf、doc、docx、xlsx、csv、text 内容时，使用此工具，可以获取url链接下的标题和内容。由于个别网站自身站点限制，无法获取网页内容。","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"链接读取:LinkReaderPlugin","title":"根据链接获取内容"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7379227817307029513","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"LinkReaderPlugin","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7379227817307013129","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"链接读取","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"articleUrl"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"error_msg","required":false,"description":"错误信息"},{"type":"string","name":"message","required":false,"description":"错误信息"},{"type":"string","name":"pdf_content","required":false,"description":"pdf的内容"},{"type":"integer","name":"code","required":false,"description":"错误码"},{"type":"object","name":"data","schema":[{"type":"string","name":"content","required":false},{"type":"list","name":"images","schema":{"type":"object","schema":[{"type":"string","name":"url","required":false},{"type":"integer","name":"width","required":false},{"type":"string","name":"alt","required":false},{"type":"integer","name":"height","required":false},{"type":"string","name":"title","required":false}]},"required":false},{"type":"string","name":"title","required":false}],"required":false,"description":"网页的内容"},{"type":"string","name":"err_msg","required":false,"description":"错误信息"},{"type":"string","name":"error_code","required":false,"description":"错误码"}]},"_temp":{"bounds":{"x":-2116.0765047207046,"y":425.8127841523088,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/372098605791453_1733129140009182679_PnsFgsWuUu.png?lk3s=cd508e2b&x-expires=1754925522&x-signature=egzGM16%2BQpCyp9YIlWvK7ZKiCJE%3D","apiName":"LinkReaderPlugin","pluginID":"7379227817307013129","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"description":"是否需要返回图片url","input":{},"name":"need_image_url","required":false,"type":"boolean"},{"description":"网页url、pdf url、docx url、csv url、 xlsx url。","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"pdf的内容","input":{},"name":"pdf_content","required":false,"type":"string"},{"description":"错误码","input":{},"name":"code","required":false,"type":"integer"},{"description":"网页的内容","input":{},"name":"data","required":false,"schema":[{"input":{},"name":"content","required":false,"type":"string"},{"input":{},"name":"images","required":false,"schema":{"schema":[{"input":{},"name":"alt","required":false,"type":"string"},{"input":{},"name":"height","required":false,"type":"integer"},{"input":{},"name":"title","required":false,"type":"string"},{"input":{},"name":"url","required":false,"type":"string"},{"input":{},"name":"width","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"input":{},"name":"title","required":false,"type":"string"}],"type":"object"},{"description":"错误信息","input":{},"name":"err_msg","required":false,"type":"string"},{"description":"错误码","input":{},"name":"error_code","required":false,"type":"string"},{"description":"错误信息","input":{},"name":"error_msg","required":false,"type":"string"},{"description":"错误信息","input":{},"name":"message","required":false,"type":"string"}],"updateTime":1752333494,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"当你需要获取网页、pdf、doc、docx、xlsx、csv、text 内容时，使用此工具，可以获取url链接下的标题和内容。由于个别网站自身站点限制，无法获取网页内容。","title":"LinkReaderPlugin","mainColor":"#CA61FF"}}},{"id":"189653","type":"3","meta":{"position":{"x":-1481.838455684846,"y":469.67022300759305}},"data":{"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"仿写爆文"},"inputs":{"inputParameters":[{"name":"content","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"108433","name":"data.content"},"rawMeta":{"type":1}}}},{"name":"title","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"108433","name":"data.title"},"rawMeta":{"type":1}}}}],"llmParam":[{"name":"temperature","input":{"type":"float","value":{"type":"literal","content":"0.8","rawMeta":{"type":4}}}},{"name":"maxTokens","input":{"type":"integer","value":{"type":"literal","content":"4096","rawMeta":{"type":2}}}},{"name":"spCurrentTime","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"spAntiLeak","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"prefixCache","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"responseFormat","input":{"type":"integer","value":{"type":"literal","content":"2","rawMeta":{"type":2}}}},{"name":"modleName","input":{"type":"string","value":{"type":"literal","content":"豆包·1.5·Pro·32k","rawMeta":{"type":1}}}},{"name":"modelType","input":{"type":"integer","value":{"type":"literal","content":"1737521813","rawMeta":{"type":2}}}},{"name":"generationDiversity","input":{"type":"string","value":{"type":"literal","content":"balance","rawMeta":{"type":1}}}},{"name":"prompt","input":{"type":"string","value":{"type":"literal","content":"文章内容：{{content}}\n\n文章标题：{{title}}","rawMeta":{"type":1}}}},{"name":"enableChatHistory","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"chatHistoryRound","input":{"type":"integer","value":{"type":"literal","content":"3","rawMeta":{"type":2}}}},{"name":"systemPrompt","input":{"type":"string","value":{"type":"literal","content":"# 角色\n你是一位专注且专业的公众号爆文仿写专家，你的职责是基于用户提供的文章，然后对文章进行仿写，并做去重处理。然后将文章传入公众号的草稿箱。\n\n# 目标\n1. 根据用户提供的文章素材，创作出高质量的爆款公众号仿写文章。\n2. 使仿写文章在结构、内容、风格等方面既参考原文又具有独特性，吸引读者关注。\n步骤是：{#InputSlot placeholder=\"请输入编辑块内容为空时的提示文案\" mode=\"input\"#}7、对爆文进行仿写{#/InputSlot#}，{#InputSlot placeholder=\"请输入编辑块内容为空时的提示文案\" mode=\"input\"#}8、针对仿写文章进行去重{#/InputSlot#}\n\n# 技能\n\n## 技能二：\n\n### 技能优化标题\n\n将原文的标题进行优化，标题不能太长，控制在20个字以内\n\n{#LibraryBlock id=\"7373609710383169572\" uuid=\"mYNNpFitH_Milp5UaRUHS\" type=\"plugin\" apiId=\"7373609710383202340\"#}title_plugin{#/LibraryBlock#}\n\n### 技能仿写文章内容\n根据提供的提供的文章，进行仿写：\n\n1、每个段落以一到两句话为佳，保持段落简短，提升文章的节奏感与易读性。\n\n2、彻底去除文章中所有与内容无关的信息，如作者署名、免责声明、发布时间等。\n\n3. 在文案表述里，清晰且坚定地表达主观观点，充分展现不容置疑的自信。\n\n4、采用口语化表达，让文章贴近读者生活，便于读者理解和接受。在参考原文语言风格细节的基础上，融入自身独特的语气、用词特色等，形成差异。\n\n5、通过生动形象的描述和富有感染力的情感化语言，引发读者强烈的情感共鸣。\n\n6、在恰当位置合理运用反问句，增强文章的语气和感染力。\n\n7、确保段落间逻辑连贯、过渡自然，使整体文章流畅易读。在参考原文段落衔接方式和过渡语句的基础上，融入自身创作思路进行优化。\n\n8、: 文章去AI化\n\n1）、在文章成稿基础上，在阐述观点，对文章进行总结的词句的开始，加入“梦想哥认为”或者“梦想哥想”诸如此类的说法。\n\n2）、每两句话，将句号换为逗号。\n\n{#LibraryBlock id=\"7516552344407113763\" uuid=\"0vS31UtfAQp70dhwBuoiz\" type=\"plugin\" apiId=\"7516552344407130147\"#}copy_imitation{#/LibraryBlock#}\n\n\n# 约束\n- 仅围绕公众号文章的仿写任务展开工作，坚决不回答与文章仿写无关的话题。\n- 只输出仿写后的文章内容，其他都不用回答。\n\n\n# 输出格式\n\n'''json\n{\n\"titile\":   \"具有传播力的文章标题\",\n\n\"content\":  \"Markdown格式的文章正文内容，包括适当的格式标记及段落分割\"\n\n\n}\n'''\n\n\n## 质量检验标准\n\n-**传播力测试**：标题是否具备点击冲动？\n-**情感共鸣测试**：内容是否能引发强烈的情感反应？\n-**分享价值测试**：读者是否愿意主动转发分享？\n-**易读性测试**：语言是否通俗易懂，节奏是否流畅？\n-**内容充实度测试**：文章是否保留原文的核心信息与深度？\n-**篇幅合理性测试**：文章字数是否达到1200~2500字的要求，内容是否丰富？\n","rawMeta":{"type":1}}}},{"name":"stableSystemPrompt","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"canContinue","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}}],"fcParam":{"llmNodeUID":"7524649897644179519","pluginFCParam":{"pluginList":[{"api_id":"7516552344407130147","api_name":"copy_imitation","is_draft":false,"plugin_id":"7516552344407113763","plugin_version":""},{"api_id":"7373609710383202340","api_name":"title_plugin","is_draft":false,"plugin_id":"7373609710383169572","plugin_version":""}]},"spaceID":"7517413284249665571","workflowVersion":""},"settingOnError":{"switch":false,"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"content"},{"type":"string","name":"title"}],"version":"3"},"_temp":{"bounds":{"x":-1661.838455684846,"y":469.67022300759305,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","description":"调用大语言模型,使用变量和提示词生成回复","title":"大模型","mainColor":"#5C62FF","skills":[{"type":1,"pluginId":"7516552344407113763","apiId":"7516552344407130147","apiName":"copy_imitation","pluginName":"全网平台文案仿写","icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/3185710345236372_1750077928890711810_wovtuwXVxX.jpg?lk3s=cd508e2b&x-expires=1754925523&x-signature=VCyet7EzVG%2BgU1Yz6TlJ9s0hMRI%3D"},{"type":1,"pluginId":"7373609710383169572","apiId":"7373609710383202340","apiName":"title_plugin","pluginName":"标题优化","icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/default_icon.png?lk3s=cd508e2b&x-expires=1754925523&x-signature=%2Bly0gQlRgrZzWMkLy2eevxhlXC0%3D"}]}}},{"id":"151233","type":"4","meta":{"position":{"x":1947.1321457808344,"y":-83.67768264187112}},"data":{"nodeMeta":{"description":"将图文信息发布到草稿箱","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"微信公众号助手:wx_upload_article","title":"把文章推送到公众号草稿箱"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7390273113004752923","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"wx_upload_article","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7390273113004687387","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"微信公众号助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"media_id","input":{},"name":"media_id","required":false,"type":"string"},{"description":"source_url","input":{},"name":"source_url","required":false,"type":"string"},{"description":"title","input":{},"name":"title","required":true,"type":"string"},{"description":"access_token","input":{},"name":"access_token","required":true,"type":"string"},{"description":"author","input":{},"name":"author","required":false,"type":"string"},{"description":"content","input":{},"name":"content","required":true,"type":"string"},{"description":"digest","input":{},"name":"digest","required":false,"type":"string"}],"inputParameters":[{"name":"access_token","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"164336","name":"token"},"rawMeta":{"type":1}}}},{"name":"content","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"154444","name":"data"},"rawMeta":{"type":1}}}},{"name":"title","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"189653","name":"title"},"rawMeta":{"type":1}}}},{"name":"media_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"119956","name":"media_id"},"rawMeta":{"type":1}}}}],"settingOnError":{"switch":false,"dataOnErr":"{\n    \"media_id\": \"\",\n    \"message\": \"\"\n}","processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"media_id","required":false},{"type":"string","name":"message","required":false}]},"_temp":{"bounds":{"x":1767.1321457808344,"y":-83.67768264187112,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/default_icon.png?lk3s=cd508e2b&x-expires=1754925522&x-signature=T3w98UmmHQZxHkjpRB2TzACglkE%3D","apiName":"wx_upload_article","pluginID":"7390273113004687387","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7352152486633291786","inputs":[{"description":"access_token","input":{},"name":"access_token","required":true,"type":"string"},{"description":"author","input":{},"name":"author","required":false,"type":"string"},{"description":"content","input":{},"name":"content","required":true,"type":"string"},{"description":"digest","input":{},"name":"digest","required":false,"type":"string"},{"description":"media_id","input":{},"name":"media_id","required":false,"type":"string"},{"description":"source_url","input":{},"name":"source_url","required":false,"type":"string"},{"description":"title","input":{},"name":"title","required":true,"type":"string"}],"outputs":[{"input":{},"name":"media_id","required":false,"type":"string"},{"input":{},"name":"message","required":false,"type":"string"}],"updateTime":1752327573,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"将图文信息发布到草稿箱","title":"wx_upload_article","mainColor":"#CA61FF"}}},{"id":"119956","type":"4","meta":{"position":{"x":1269.2614964384497,"y":-45.25476003159821}},"data":{"nodeMeta":{"description":"上传素材","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"微信公众号助手:wx_material_upload","title":"获取公众号首图 id"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7390273113004736539","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"wx_material_upload","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7390273113004687387","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"微信公众号助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"access_token","input":{},"name":"access_token","required":true,"type":"string"},{"description":"image_url","input":{},"name":"image_url","required":true,"type":"string"}],"inputParameters":[{"name":"access_token","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"164336","name":"token"},"rawMeta":{"type":1}}}},{"name":"image_url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"117268","name":"Group1"},"rawMeta":{"type":1}}}}],"settingOnError":{"switch":false,"dataOnErr":"{\n    \"media_id\": \"\",\n    \"message\": \"\"\n}","processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"media_id","required":false},{"type":"string","name":"message","required":false}]},"_temp":{"bounds":{"x":1089.2614964384497,"y":-45.25476003159821,"width":360,"height":112},"externalData":{"icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/default_icon.png?lk3s=cd508e2b&x-expires=1754925522&x-signature=TW4meZKYV49Chsm3kBn6PQrV1lY%3D","apiName":"wx_material_upload","pluginID":"7390273113004687387","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7352152486633291786","inputs":[{"description":"access_token","input":{},"name":"access_token","required":true,"type":"string"},{"description":"image_url","input":{},"name":"image_url","required":true,"type":"string"}],"outputs":[{"input":{},"name":"media_id","required":false,"type":"string"},{"input":{},"name":"message","required":false,"type":"string"}],"updateTime":1752327573,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"上传素材","title":"wx_material_upload","mainColor":"#CA61FF"}}},{"id":"167811","type":"5","meta":{"position":{"x":-369.5848507130983,"y":-691.8839950720397}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","mainColor":"#00B2B2","subTitle":"代码","title":"过滤空图片url"},"inputs":{"inputParameters":[{"name":"input","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"138801","name":"output"},"rawMeta":{"type":99}}}}],"code":"// 在这里，您可以通过 'params'  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为'input'的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": '小明', \"hobbies\": [\"看书\", \"旅游\"] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 过滤空值图片URL并转换为https\n    const filteredOutput = params.input\n        .filter(url => url.trim() !== '') // 过滤掉空字符串和纯空格\n        .filter(url => url !== null)      // 过滤null值\n        .filter(url => url !== undefined) // 过滤undefined\n        .map(url => url.replace(/^http:/, 'https:')); // 将http前缀替换为https\n\n    return {\n        output: filteredOutput\n    };\n}","language":5,"settingOnError":{"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"list","name":"output","schema":{"type":"string"}}]},"_temp":{"bounds":{"x":-549.5848507130984,"y":-691.8839950720397,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}}],"edges":[{"sourceNodeID":"164336","targetNodeID":"118285"},{"sourceNodeID":"189653","targetNodeID":"118285"},{"sourceNodeID":"118285","targetNodeID":"128908"},{"sourceNodeID":"150766","targetNodeID":"154444"},{"sourceNodeID":"154444","targetNodeID":"437595"},{"sourceNodeID":"167811","targetNodeID":"150766"},{"sourceNodeID":"128908","targetNodeID":"138801","sourcePortID":"true"},{"sourceNodeID":"138801","targetNodeID":"167811","sourcePortID":"loop-output"},{"sourceNodeID":"437595","targetNodeID":"117268"},{"sourceNodeID":"128908","targetNodeID":"171463","sourcePortID":"false"},{"sourceNodeID":"171463","targetNodeID":"117268"},{"sourceNodeID":"117268","targetNodeID":"119956"},{"sourceNodeID":"108433","targetNodeID":"189653"},{"sourceNodeID":"119956","targetNodeID":"151233"}]},"bounds":{"x":-2116.0765047207046,"y":-790.5405486022111,"width":4243.2086505015395,"height":1424.210771609804}}